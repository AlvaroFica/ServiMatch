{% extends 'base_admin.html' %}
{% block title %}Servicios{% endblock %}

{% block content %}
<h1>Servicios Publicados</h1>

<form method="get" style="margin-bottom: 1rem;">
  <label>Tipo:</label>
  <select name="tipo">
    <option value="">-- Todos --</option>
    {% for t in tipos %}
      <option value="{{ t.id }}" {% if tipo_seleccionado == t.id|stringformat:"s" %}selected{% endif %}>{{ t.nombre_tipo }}</option>
    {% endfor %}
  </select>

  <label>Comuna:</label>
  <select name="comuna">
    <option value="">-- Todas --</option>
    {% for c in comunas %}
      <option value="{{ c.id }}" {% if comuna_seleccionada == c.id|stringformat:"s" %}selected{% endif %}>{{ c.nombre_comuna }}</option>
    {% endfor %}
  </select>

  <button type="submit">Filtrar</button>
</form>

<table style="width:100%; background:white;">
  <thead><tr><th>Nombre</th><th>Tipo</th><th># Trabajadores</th></tr></thead>
  <tbody>
    {% for s in servicios %}
    <tr>
      <td>{{ s.nombre_serv }}</td>
      <td>{{ s.tipo }}</td>
      <td>{{ s.trabajadores|length }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
