{% extends "layouts/principal_base.html" %}
{% load static %}

{% block content %}
<div class="container mt-5">
  <div class="row">
    {% for servicio in servicios %}
    <div class="col-md-6 mb-4">
      <div class="card p-3 shadow-sm">
        <h5 class="card-title">{{ servicio.nombre }}</h5>
        <p class="card-text">{{ servicio.descripcion }}</p>

        <!-- Depuraci칩n temporal -->
        <p><strong>Servicio ID:</strong> {{ servicio.id }}</p>

        {% if servicio.id %}
        <!-- Bot칩n para calificar -->
        <button type="button" class="btn btn-outline-primary me-2" data-bs-toggle="modal"
          data-bs-target="#ratingModal{{ servicio.id }}">
          Calificar Servicio
        </button>

        <!-- Bot칩n para seleccionar etiquetas -->
        <button type="button" class="btn btn-outline-secondary" data-bs-toggle="modal"
          data-bs-target="#tagModal{{ servicio.id }}">
          Etiquetas
        </button>

        <!-- Modales individuales por servicio -->
        {% include "layouts/rating_modal.html" with servicio=servicio %}
        {% include "layouts/tag_selector_modal.html" with servicio=servicio etiquetas=etiquetas %}

        {% else %}
        <div class="alert alert-warning">
          Servicio sin ID v치lido, no se puede calificar.
        </div>
        {% endif %}
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}